language: node_js
node_js: stable

# Travis-CI Caching
cache:
  directories:
    - node_modules


# S: Build Lifecycle
install:
  - npm install

before_script:
  - hexo clean

script:
  - hexo generate

after_script:
  - rm -rf .deploy_git
  - mkdir .deploy_git
  - cp -R public/* .deploy_git/
  - cd .deploy_git
  - git init
  - git config user.name "daorren"
  - git config user.email "daorenmc@gmail.com"
  - git add .
  - git commit -m "Update"
  - git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master
# # E: Build LifeCycle

branches:
  only:
    - master
env:
 global:
   - GH_REF: github.com:daorren/daorren.github.io.git
   - secure: "WeaVqMzyJK+wiHwrnq3GCxMJBvITG0hbHrNhbsknnf/91FwrO+NriJCWNTkx9mPNKa1teuekcm3S1viP8mU9i5i4fid96/oaETZsiS/LlkQ1khslj8LYJjZvLx7EefJJyYS53+g+tU6XVHCpvWALMpzrxeK6BleeYISz6RphiyCqKYZZKix+hcNqrJUxRZv3WgH1l+omQQfi3vYuW/SKQmfTDpsFc7LEStvU9QKQg2YvBEu9QTWGphOlKj+f9qFJRGTgRgPM1RSq98GnJ4nLBMS/qV4oouaRpKzVMpXjTI1evPHi3YXuHCWo7zRZj/GWcbmgFRDrFxY7VqtsZWz+xo9CNTNV95CyI+oNfXQoAttOgupfRyNSTC7qE7NkLvEGryDtobWL2aKY1BxjAybE2nDxq7zzHeFJaInWnv+9ok6P9X/fS+Aw4GJgLtpkUvVvrmWp9d5hha6iSH8c0CDixTBYSW13EbqOgGDvs+G8zfKULg7lCn3p6rac2EW1M0EAmXsuELOAzyofBBs7Dpht3RIrY9LRn9YgrQ2sFWhGs6i0Ikexj3rkn93HjrWZihkA2E/z7nkKBY0ZXF2q3lBqNBoifZKL6WOhBqnt9Hx01YIJCkm8NVtnflhIDwEazTtmjNYra4R/MiknBJKvnNucu/7x/ArbQN4JpNMDe7AT0wo="
